var xe=Object.defineProperty,_e=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var te=(i,t,e)=>t in i?xe(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,F=(i,t)=>{for(var e in t||(t={}))we.call(t,e)&&te(i,e,t[e]);if(ee)for(var e of ee(t))ve.call(t,e)&&te(i,e,t[e]);return i},V=(i,t)=>_e(i,ze(t));import{S as Se,i as Ce,K as Te,e as ae,k as Ye,c as ce,a as de,m as De,d as q,b as M,W as U,g as ue,J as Le,N as ne,G as Ze,H as Me,I as Ie,r as fe,p as he,X as Xe,o as Ee,Y as Be,q as He,w as Oe,F as Re,Z as ke,U as ie}from"./index-3d005263.js";var H=(i=>(i[i.Vertical=0]="Vertical",i[i.Horizontal=1]="Horizontal",i))(H||{}),B=(i=>(i[i.Programatic=0]="Programatic",i[i.User=1]="User",i))(B||{});function se(i,t,e){const s=i.slice();return s[30]=t[e],s[31]=t,s[32]=e,s}const Ae=i=>({index:i[0]&128,drag:i[0]&194}),oe=i=>{var t;return{index:i[32],drag:((t=i[6])==null?void 0:t.sourceIndex)===i[32]&&i[6].sourceZone.id===i[1]?i[6]:void 0}};function re(i,t){let e,s,f,m,u=t[32],p,c,l;const b=t[17].default,z=Re(b,t,t[16],oe),O=()=>t[18](e,u),R=()=>t[18](null,u);function X(...o){return t[19](t[32],...o)}function r(...o){return t[20](t[32],...o)}return{key:i,first:null,c(){e=ae("div"),z&&z.c(),s=Ye(),this.h()},l(o){e=ce(o,"DIV",{"data-dnditem":!0,class:!0,style:!0});var T=de(e);z&&z.l(T),s=De(T),T.forEach(q),this.h()},h(){var o;M(e,"data-dnditem",""),M(e,"class",f=U(`${t[3]} ${((o=t[6])==null?void 0:o.sourceIndex)===t[32]?`dragging ${t[6].type===B.User?"user":"prog"}`:""}`)+" svelte-5pq4xz"),M(e,"style",m=`${t[0].direction===H.Vertical?"height":"width"}: ${t[2]}px;`),this.first=e},m(o,T){ue(o,e,T),z&&z.m(e,null),Le(e,s),O(),p=!0,c||(l=[ne(e,"mousedown",X),ne(e,"touchstart",r)],c=!0)},p(o,T){var k;t=o,z&&z.p&&(!p||T[0]&65730)&&Ze(z,b,t,t[16],p?Ie(b,t[16],T,Ae):Me(t[16]),oe),(!p||T[0]&200&&f!==(f=U(`${t[3]} ${((k=t[6])==null?void 0:k.sourceIndex)===t[32]?`dragging ${t[6].type===B.User?"user":"prog"}`:""}`)+" svelte-5pq4xz"))&&M(e,"class",f),(!p||T[0]&5&&m!==(m=`${t[0].direction===H.Vertical?"height":"width"}: ${t[2]}px;`))&&M(e,"style",m),u!==t[32]&&(R(),u=t[32],O())},i(o){p||(fe(z,o),p=!0)},o(o){he(z,o),p=!1},d(o){o&&q(e),z&&z.d(o),R(),c=!1,Xe(l)}}}function We(i){let t,e=[],s=new Map,f,m,u=i[7];const p=c=>c[5](c[32]);for(let c=0;c<u.length;c+=1){let l=se(i,u,c),b=p(l);s.set(b,e[c]=re(b,l))}return{c(){t=ae("div");for(let c=0;c<e.length;c+=1)e[c].c();this.h()},l(c){t=ce(c,"DIV",{"data-dndzone":!0,class:!0});var l=de(t);for(let b=0;b<e.length;b+=1)e[b].l(l);l.forEach(q),this.h()},h(){M(t,"data-dndzone",""),M(t,"class",f=U(`${i[4]} ${i[0].containerClass}`)+" svelte-5pq4xz")},m(c,l){ue(c,t,l);for(let b=0;b<e.length;b+=1)e[b].m(t,null);i[21](t),m=!0},p(c,l){l[0]&66543&&(u=c[7],Ee(),e=Be(e,l,p,1,c,u,s,t,ke,re,null,se),He()),(!m||l[0]&17&&f!==(f=U(`${c[4]} ${c[0].containerClass}`)+" svelte-5pq4xz"))&&M(t,"class",f)},i(c){if(!m){for(let l=0;l<u.length;l+=1)fe(e[l]);m=!0}},o(c){for(let l=0;l<e.length;l+=1)he(e[l]);m=!1},d(c){c&&q(t);for(let l=0;l<e.length;l+=1)e[l].d();i[21](null)}}}const le="[data-dndhandle]",E=new Array;let W=!1,Z;function Fe(i,t){for(let e=0;e<E.length;++e){const s=E[e];if(s.insideBounding(i,t))return s}}function Ve(i,t,e){let{$$slots:s={},$$scope:f}=t,{id:m}=t,{itemCount:u}=t,{itemSize:p}=t,{type:c}=t,{onDrop:l}=t,{priority:b=1}=t,{itemClass:z=""}=t,{zoneClass:O=""}=t,{keyFn:R=n=>n}=t,{useHandle:X=!1}=t;const r=new c(m,b,u,p);let o,T=new Array(u);Oe(()=>(r.styleContainerBaseStyle(),E.push(r),E.sort((n,d)=>d.priority-n.priority),()=>{E.splice(E.findIndex(n=>n===r),1)}));function k(n,d){n.button!==0||X&&n.target.closest(le)===null||(document.addEventListener("mousemove",P),document.addEventListener("mouseup",K),document.body.style.cursor="grabbing",G({pageX:n.pageX,pageY:n.pageY},d),P(n))}function j(n,d){X&&n.target.closest(le)===null||(document.addEventListener("touchmove",N),document.addEventListener("touchend",Q),G({pageX:n.touches[0].pageX,pageY:n.touches[0].pageY},d),N(n))}function G(n,d){W=!0;const a=r.items[d],g=a.getBoundingClientRect(),h=document.createElement("div");h.style.cssText=r.placeholderStyleStr(),h.setAttribute("data-dndplaceholder",""),r.el.appendChild(h),o!==void 0&&A(),e(6,o={type:B.User,el:a,placeholder:h,resetZones:new Set([r]),sourceIndex:d,hoverIndex:void 0,sourceZone:r,destZone:r,bounding:{dragLeft:n.pageX-g.left,dragTop:n.pageY-g.top,left:g.left,top:g.top,bottom:g.bottom,right:g.right,height:g.height,width:g.width},onMoveResolve:void 0})}function P(n){J(n)}function N(n){J({pageX:n.touches[0].pageX,pageY:n.touches[0].pageY,clientX:n.touches[0].clientX,clientY:n.touches[0].clientY})}function J({pageX:n,pageY:d,clientX:a,clientY:g}){W&&(Z&&cancelAnimationFrame(Z),Z=requestAnimationFrame(()=>{Z=void 0;const h=o,{el:D,sourceZone:y,sourceIndex:w,bounding:x}=h,Y=n,C=d,v=a-(x.dragLeft+x.left)+-y.el.scrollLeft+y.dragXOffset(w),S=g-(x.dragTop+x.top)+-y.el.scrollTop+y.dragYOffset(w);let _=Fe(Y,C);if(_===y){const L=_!==h.destZone;L&&h.destZone!==void 0&&h.destZone.styleDestReset();const I=_.pointIndex(Y,C);(I!==h.hoverIndex||L)&&(_.styleSourceMove(I,w,h.hoverIndex!==void 0),e(6,o=V(F({},o),{hoverIndex:I,destZone:_}))),D.style.cssText=`z-index:1000; pointer-events:none; cursor:grabbing; height:${y.itemHeight()}px; width:${y.itemWidth()}px; transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1); position:fixed; transform:translate(${v}px,${S}px)`}else{const L=_!==h.destZone;if(L&&(h.destZone===y?h.destZone.styleSourceMissing(w):h.destZone!==void 0&&h.destZone.styleDestReset()),_!==void 0){L&&h.resetZones.add(_);const I=_.pointIndex(Y,C);(I!==h.hoverIndex||L)&&(_.styleDestMove(I),e(6,o=V(F({},o),{hoverIndex:I,destZone:_}))),D.style.cssText=`z-index:1000; pointer-events: none; cursor:grabbing; position:fixed; height:${_.itemHeight()}px; width:${_.itemWidth()}px; transition: height 0.2s cubic-bezier(0.2, 0, 0, 1); transform:translate(${v}px,${S}px); transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`}else L&&e(6,o=V(F({},o),{hoverIndex:-1,destZone:void 0})),D.style.cssText=`z-index:1000; pointer-events:none; cursor:grabbing; position:fixed; transform:translate(${v}px,${S}px); height:${h.sourceZone.itemHeight()}px; width:${h.sourceZone.itemWidth()}px;  transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`}}))}function K(n){!W||(document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",K),document.body.style.cursor="",$())}function Q(n){!W||(document.removeEventListener("touchmove",N),document.removeEventListener("touchend",Q),$())}function $(){var C;W=!1,Z&&cancelAnimationFrame(Z);const{el:n,destZone:d,sourceZone:a,sourceIndex:g}=o,h=(C=o.hoverIndex)!=null?C:g;n.addEventListener("transitionend",A);let D,y,w,x,Y=!1;if(d===a){let v=0,S=0;const{count:_,direction:L}=a;h===_&&(L===H.Vertical?S=-1:L===H.Horizontal&&(v=-1)),D=a.dragXOffset(h+v)-a.el.scrollLeft-window.scrollX,y=a.dragYOffset(h+S)-a.el.scrollTop-window.scrollY,w=a.itemHeight(),x=a.itemWidth(),Y=n.style.transform===`translate(${D}px, ${y}px)`||n.style.transform===""}else if(d!==void 0){const v=d.el.getBoundingClientRect(),S=a.el.getBoundingClientRect();D=v.left-S.left+d.dragXOffset(h,d.count+1)-d.el.scrollLeft-window.scrollX,y=v.top-S.top+d.dragYOffset(h,d.count+1)-d.el.scrollTop-window.scrollY,w=d.itemHeight(),x=d.itemWidth()}else D=a.dragXOffset(g)-a.el.scrollLeft-window.scrollX,y=a.dragYOffset(g)-a.el.scrollTop-window.scrollY,w=a.itemHeight(),x=a.itemWidth(),a.styleSourceMove(g,g,!0);n.style.cssText=`z-index:1000; position:fixed; height:${w}px; width:${x}px; transform:translate(${D}px,${y}px); transition:transform 0.2s cubic-bezier(0.2,0,0,1), height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`,Y&&A()}function A(n){var C,v;const{el:d,destZone:a,sourceZone:g,sourceIndex:h,resetZones:D,placeholder:y}=o,w=(C=o.hoverIndex)!=null?C:h;if(n&&n.target!==d)return;Z&&cancelAnimationFrame(Z),Z=void 0;const x={dropZoneID:g.id,index:h},Y=a?{dropZoneID:a.id,index:w}:void 0;l({from:x,to:Y}),g.el.removeChild(y),D.forEach(S=>S.styleRemove()),d.removeEventListener("transitionend",A),(v=o.onMoveResolve)==null||v.call(o),e(6,o=void 0)}async function me(n,d,a,g=500){return new Promise((h,D)=>{if(o!==void 0){h();return}const y=r.items[n];if(!y){h();return}{const Y=r.dragXOffset(n),C=r.dragYOffset(n),v=r.itemHeight(),S=r.itemWidth();y.style.cssText=`z-index:1000; height:${v}px; width:${S}px; position:fixed; transform:translate(${Y}px,${C}px)`}const w=document.createElement("div");w.style.cssText=r.placeholderStyleStr(),w.setAttribute("data-dndplaceholder",""),r.el.appendChild(w),r.styleSourceMove(n,n,!1),setTimeout(()=>{(o==null?void 0:o.type)===B.Programatic&&r.styleSourceMissing(n)},g*.4),a.styleDestMove(d);const x=y.getBoundingClientRect();e(6,o={type:B.Programatic,el:y,placeholder:w,resetZones:new Set([r,a]),sourceIndex:n,hoverIndex:d,sourceZone:r,destZone:a,bounding:{dragLeft:0,dragTop:0,left:x.left,top:x.top,bottom:x.bottom,right:x.right,height:x.height,width:x.width},onMoveResolve:h});{const Y=r.el.getBoundingClientRect(),C=a.el.getBoundingClientRect(),v=C.left-Y.left+a.dragXOffset(d,a.count+1)-a.el.scrollLeft,S=C.top-Y.top+a.dragYOffset(d,a.count+1)-a.el.scrollTop,_=a.itemHeight(),L=a.itemWidth();y.style.cssText=`
                z-index: 1000; 
                position: fixed; 
                height: ${_}px; 
                width: ${L}px; 
                transform: translate(${v}px,${S}px); 
                transition:
                    transform ${g}ms cubic-bezier(0.2, 0, 0, 1), 
                    height ${g}ms cubic-bezier(0.2, 0, 0, 1), 
                    width ${g}ms cubic-bezier(0.2, 0, 0, 1);`}y.addEventListener("transitionend",A)})}function ge(n,d){ie[n?"unshift":"push"](()=>{r.items[d]=n,e(0,r),e(1,m),e(10,u),e(2,p)})}const pe=(n,d)=>k(d,n),ye=(n,d)=>j(d,n);function be(n){ie[n?"unshift":"push"](()=>{r.el=n,e(0,r),e(1,m),e(10,u),e(2,p)})}return i.$$set=n=>{"id"in n&&e(1,m=n.id),"itemCount"in n&&e(10,u=n.itemCount),"itemSize"in n&&e(2,p=n.itemSize),"type"in n&&e(11,c=n.type),"onDrop"in n&&e(12,l=n.onDrop),"priority"in n&&e(13,b=n.priority),"itemClass"in n&&e(3,z=n.itemClass),"zoneClass"in n&&e(4,O=n.zoneClass),"keyFn"in n&&e(5,R=n.keyFn),"useHandle"in n&&e(14,X=n.useHandle),"$$scope"in n&&e(16,f=n.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&2&&e(0,r.id=m,r),i.$$.dirty[0]&1029&&(u!=r.count||p!==r.itemSize)&&(e(0,r.count=u,r),e(0,r.itemSize=p,r),e(7,T=new Array(u)),r.el&&r.styleContainerBaseStyle())},[r,m,p,z,O,R,o,T,k,j,u,c,l,b,X,me,f,s,ge,pe,ye,be]}class Pe extends Se{constructor(t){super(),Ce(this,t,Ve,We,Te,{id:1,itemCount:10,itemSize:2,type:11,onDrop:12,priority:13,itemClass:3,zoneClass:4,keyFn:5,useHandle:14,dropzone:0,move:15},null,[-1,-1])}get dropzone(){return this.$$.ctx[0]}get move(){return this.$$.ctx[15]}}class Ne{constructor(t,e,s,f){this.direction=H.Vertical,this.id=t,this.priority=s,this.count=e,this.itemSize=f,this.items=new Array(e),this.el=void 0,this.containerClass="vertical"}insideBounding(t,e){const s=this.el.getBoundingClientRect();return e>s.top&&e<s.bottom&&t>s.left&&t<s.right}pointIndex(t,e){const{el:s,itemSize:f,count:m}=this,p=s.getBoundingClientRect().top-s.scrollTop,c=Math.floor((e-p)/f);return Math.min(Math.max(c,0),m)}placeholderStyleStr(){return`height: ${this.itemSize}px; width: 100%;`}dragXOffset(t){return 0}dragYOffset(t){return t*this.itemSize}itemHeight(){return this.itemSize}itemWidth(){return this.el.clientWidth}styleSourceMove(t,e,s){const{items:f,itemSize:m}=this;for(let u=0;u<f.length;++u){const p=t>e&&(u<e||u>e&&u<=t)||t<e&&u<t||t==e&&u<e,c=t>e&&u>t||t<e&&(u>=t&&u<e||u>e)||t==e&&u>e,l=f[u];p?l&&(l.style.cssText=`transform: translateY(0px); transition: transform 0.2s cubic-bezier(0.2, 0, 0, 1); height: ${m}px;`):c&&(s?l&&(l.style.cssText=`transform: translateY(${m}px); transition: transform 0.2s cubic-bezier(0.2, 0, 0, 1); height: ${m}px;`):l&&(l.style.cssText=`transform: translateY(${m}px); height: ${m}px;`))}}styleSourceMissing(t){const{items:e,itemSize:s}=this;for(let f=0;f<e.length;++f)e[f]&&f!==t&&(e[f].style.cssText=`transform: translateY(0px); transition: transform 0.2s cubic-bezier(0.2, 0, 0, 1); height: ${s}px;`)}styleDestMove(t){const{items:e,itemSize:s}=this;for(let f=0;f<e.length;++f){const m=e[f];f<t?m&&(m.style.cssText=`transform: translateY(0px); transition: transform 0.2s cubic-bezier(0.2, 0, 0, 1); height: ${s}px;`):m&&(m.style.cssText=`transform: translateY(${s}px); transition: transform 0.2s cubic-bezier(0.2, 0, 0, 1); height: ${s}px;`)}}styleDestReset(){const{items:t,itemSize:e}=this;for(let s=0;s<t.length;++s)t[s]&&(t[s].style.cssText=`transform:translateY(0px); transition:transform 0.2s cubic-bezier(0.2, 0, 0, 1); height: ${e}px;`)}styleRemove(){this.styleContainerBaseStyle()}styleContainerBaseStyle(){const{items:t,itemSize:e}=this;for(let s=0;s<t.length;++s){const f=t[s];f&&(f.style.cssText=`height: ${e}px;`)}}}export{H as D,Ne as V,Pe as a};
