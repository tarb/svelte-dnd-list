var xe=Object.defineProperty,ze=Object.defineProperties;var we=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable;var te=(i,n,e)=>n in i?xe(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e,P=(i,n)=>{for(var e in n||(n={}))Ze.call(n,e)&&te(i,e,n[e]);if(ee)for(var e of ee(n))Le.call(n,e)&&te(i,e,n[e]);return i},R=(i,n)=>ze(i,we(n));import{S as Ce,i as Se,K as Ee,e as ue,k as De,c as ae,a as ce,m as Ie,d as X,b as D,W as Y,g as fe,J as Me,N as ne,G as He,H as ke,I as Te,r as he,p as me,X as Oe,o as Ae,Y as Fe,q as Pe,Z as Re,w as We,F as Xe,_ as Ye,U as ie}from"./index-549bb60c.js";var W=(i=>(i[i.Vertical=0]="Vertical",i[i.Horizontal=1]="Horizontal",i))(W||{}),F=(i=>(i[i.Programatic=0]="Programatic",i[i.User=1]="User",i))(F||{});function oe(i,n,e){const p=i.slice();return p[31]=n[e],p[32]=n,p[33]=e,p}const Ve=i=>({index:i[0]&64,drag:i[0]&98}),se=i=>{var n;return{index:i[33],drag:((n=i[5])==null?void 0:n.sourceIndex)===i[33]&&i[5].sourceZone.id===i[1]?i[5]:void 0}};function re(i,n){let e,p,S,z,y=n[33],f,d,u;const g=n[17].default,b=Xe(g,n,n[16],se),T=()=>n[18](e,y),O=()=>n[18](null,y);function H(..._){return n[19](n[33],..._)}function s(..._){return n[20](n[33],..._)}return{key:i,first:null,c(){e=ue("div"),b&&b.c(),p=De(),this.h()},l(_){e=ae(_,"DIV",{"data-dnd-item":!0,"data-dnd-dragging":!0,class:!0,style:!0});var a=ce(e);b&&b.l(a),p=Ie(a),a.forEach(X),this.h()},h(){D(e,"data-dnd-item",""),D(e,"data-dnd-dragging",S=(l==null?void 0:l.sourceIndex)===n[33]||n[5]===null?!0:void 0),D(e,"class",z=Y(n[2])+" svelte-1h8tpti"),D(e,"style",n[7]),this.first=e},m(_,a){fe(_,e,a),b&&b.m(e,null),Me(e,p),T(),f=!0,d||(u=[ne(e,"mousedown",H),ne(e,"touchstart",s)],d=!0)},p(_,a){n=_,b&&b.p&&(!f||a[0]&65634)&&He(b,g,n,n[16],f?Te(g,n[16],a,Ve):ke(n[16]),se),(!f||a[0]&96&&S!==(S=(l==null?void 0:l.sourceIndex)===n[33]||n[5]===null?!0:void 0))&&D(e,"data-dnd-dragging",S),(!f||a[0]&4&&z!==(z=Y(n[2])+" svelte-1h8tpti"))&&D(e,"class",z),(!f||a[0]&128)&&D(e,"style",n[7]),y!==n[33]&&(O(),y=n[33],T())},i(_){f||(he(b,_),f=!0)},o(_){me(b,_),f=!1},d(_){_&&X(e),b&&b.d(_),O(),d=!1,Oe(u)}}}function Be(i){let n,e=[],p=new Map,S,z,y=i[6];const f=d=>d[4](d[33]);for(let d=0;d<y.length;d+=1){let u=oe(i,y,d),g=f(u);p.set(g,e[d]=re(g,u))}return{c(){n=ue("div");for(let d=0;d<e.length;d+=1)e[d].c();this.h()},l(d){n=ae(d,"DIV",{"data-dnd-zone":!0,class:!0});var u=ce(n);for(let g=0;g<e.length;g+=1)e[g].l(u);u.forEach(X),this.h()},h(){D(n,"data-dnd-zone",""),D(n,"class",S=Y(`${i[3]} ${i[0].containerClass}`)+" svelte-1h8tpti")},m(d,u){fe(d,n,u);for(let g=0;g<e.length;g+=1)e[g].m(n,null);i[21](n),z=!0},p(d,u){u[0]&66551&&(y=d[6],Ae(),e=Fe(e,u,f,1,d,y,p,n,Ye,re,null,oe),Pe()),(!z||u[0]&9&&S!==(S=Y(`${d[3]} ${d[0].containerClass}`)+" svelte-1h8tpti"))&&D(n,"class",S)},i(d){if(!z){for(let u=0;u<y.length;u+=1)he(e[u]);z=!0}},o(d){for(let u=0;u<e.length;u+=1)me(e[u]);z=!1},d(d){d&&X(n);for(let u=0;u<e.length;u+=1)e[u].d();i[21](null)}}}const de="[data-dnd-handle]",le=5,k=new Array;let I,l,M;function Ue(i,n){for(let e=0;e<k.length;++e){const p=k[e];if(p.insideBounding(i,n))return p}}function qe(i,n,e){let p,{$$slots:S={},$$scope:z}=n,{id:y}=n,{itemCount:f}=n,{itemSize:d}=n,{type:u}=n,{priority:g=1}=n,{itemClass:b=void 0}=n,{zoneClass:T=void 0}=n,{keyFn:O=t=>t}=n,{useHandle:H=!1}=n;const s=new u(y,g,f,d),_=Re();let a,V=new Array(f);We(()=>(s.styleContainerBaseStyle(),k.push(s),k.sort((t,r)=>r.priority-t.priority),()=>{k.splice(k.findIndex(t=>t===s),1)}));function B(t,r){t.button!==0||H&&t.target.closest(de)===null||(document.addEventListener("mousemove",N),document.addEventListener("mouseup",J),q({pageX:t.pageX,pageY:t.pageY},r))}function U(t,r){H&&t.target.closest(de)===null||(document.addEventListener("touchmove",G),document.addEventListener("touchend",K),q({pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},r))}function q({pageX:t,pageY:r},o){const h=s.items[o],m=h.getBoundingClientRect();I={el:h,initPageX:t,initPageY:r,sourceIndex:o,dragLeft:t-m.left,dragTop:r-m.top,sourceZone:s}}function N(t){j(t)}function G(t){j({pageX:t.touches[0].pageX,pageY:t.touches[0].pageY})}function j({pageX:t,pageY:r}){if(l===void 0&&(Math.abs(t-I.initPageX)>le||Math.abs(r-I.initPageY)>le)){l&&A();const o=document.createElement("div");o.style.cssText=s.placeholderStyleStr(),o.setAttribute("data-dnd-placeholder",""),s.el.appendChild(o),l={type:F.User,el:I.el,placeholder:o,resetZones:new Set([s]),sourceIndex:I.sourceIndex,hoverIndex:void 0,sourceZone:I.sourceZone,destZone:s,dragLeft:I.dragLeft,dragTop:I.dragTop,onMoveResolve:void 0},e(5,a=l),I=void 0,document.body.style.cursor="grabbing"}l&&(M&&cancelAnimationFrame(M),M=requestAnimationFrame(()=>{M=void 0;const o=l,{el:h,sourceZone:m,sourceIndex:E,dragLeft:v,dragTop:w}=o,x=t-v,L=r-w;let c=Ue(t,r);if(c===m){const Z=c!==o.destZone;Z&&o.destZone!==void 0&&o.destZone.styleDestReset();const C=c.pointIndex(t,r);(C!==o.hoverIndex||Z)&&(c.styleSourceMove(C,E,o.hoverIndex!==void 0),l=R(P({},l),{hoverIndex:C,destZone:c}),e(5,a=l)),h.style.cssText=`position: fixed; top: 0; left: 0; z-index:1000; pointer-events:none; cursor:grabbing; height:${m.itemHeight()}px; width:${m.itemWidth()}px; transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1); position:fixed; transform:translate(${x}px,${L}px)`}else{const Z=c!==o.destZone;if(Z&&(o.destZone===m?o.destZone.styleSourceMissing(E):o.destZone!==void 0&&o.destZone.styleDestReset()),c!==void 0){Z&&o.resetZones.add(c);const C=c.pointIndex(t,r);(C!==o.hoverIndex||Z)&&(c.styleDestMove(C),l=R(P({},l),{hoverIndex:C,destZone:c}),e(5,a=l)),h.style.cssText=`position: fixed; top: 0; left: 0; z-index:1000; pointer-events: none; cursor:grabbing; position:fixed; height:${c.itemHeight()}px; width:${c.itemWidth()}px; transition: height 0.2s cubic-bezier(0.2, 0, 0, 1); transform:translate(${x}px,${L}px); transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`}else Z&&(l=R(P({},l),{hoverIndex:-1,destZone:void 0}),e(5,a=l)),h.style.cssText=`position: fixed; top: 0; left: 0; z-index:1000; pointer-events:none; cursor:grabbing; position:fixed; transform:translate(${x}px,${L}px); height:${o.sourceZone.itemHeight()}px; width:${o.sourceZone.itemWidth()}px;  transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`}}))}function J(t){document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",J),l&&Q()}function K(t){document.removeEventListener("touchmove",G),document.removeEventListener("touchend",K),l&&Q()}function Q(){var c;M&&cancelAnimationFrame(M);const{el:t,destZone:r,sourceZone:o,sourceIndex:h}=l,m=(c=l.hoverIndex)!=null?c:h;document.body.style.cursor="",t.addEventListener("transitionend",A);let E,v,w,x,L=!1;if(r===o){let Z=0,C=0;const{count:ve,direction:$}=o;m===ve&&($===W.Vertical?C=-1:$===W.Horizontal&&(Z=-1)),E=o.dragXOffset(m+Z),v=o.dragYOffset(m+C),w=o.itemHeight(),x=o.itemWidth(),L=t.style.transform===`translate(${E}px, ${v}px)`||t.style.transform===""}else r!==void 0?(E=r.dragXOffset(m,r.count+1),v=r.dragYOffset(m,r.count+1),w=r.itemHeight(),x=r.itemWidth()):(E=o.dragXOffset(h),v=o.dragYOffset(h),w=o.itemHeight(),x=o.itemWidth(),o.styleSourceMove(h,h,!0));t.style.cssText=`position: fixed; top: 0; left: 0; z-index:1000; position:fixed; height:${w}px; width:${x}px; transform:translate(${E}px,${v}px); transition:transform 0.2s cubic-bezier(0.2,0,0,1), height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`,L&&A()}function A(t){var c,Z;const{el:r,destZone:o,sourceZone:h,sourceIndex:m,resetZones:E,placeholder:v}=l,w=(c=l.hoverIndex)!=null?c:m;if(t&&t.target!==r)return;M&&cancelAnimationFrame(M),M=void 0;const x={dropZoneID:h.id,index:m},L=o?o===h&&w===m?x:{dropZoneID:o.id,index:w}:void 0;_("drop",{from:x,to:L}),v&&h.el.removeChild(v),E.forEach(C=>C.styleRemove()),r.removeEventListener("transitionend",A),(Z=l.onMoveResolve)==null||Z.call(l),l=void 0,e(5,a=void 0)}async function ge(t,r,o,h=500){return new Promise((m,E)=>{if(l!==void 0){m();return}const v=s.items[t];if(!v){m();return}{const w=s.dragXOffset(t),x=s.dragYOffset(t),L=s.itemHeight(),c=s.itemWidth();v.style.cssText=`z-index:1000; height:${L}px; width:${c}px; position:fixed; transform:translate(${w}px,${x}px)`}s.styleSourceMove(t,t,!1),o!==s?(setTimeout(()=>{(a==null?void 0:a.type)===F.Programatic&&s.styleSourceMissing(t)},h*.4),o.styleDestMove(r)):setTimeout(()=>{(a==null?void 0:a.type)===F.Programatic&&s.styleSourceMove(r,t,!0)},h*.25),l={type:F.Programatic,el:v,placeholder:void 0,resetZones:new Set([s,o]),sourceIndex:t,hoverIndex:r,sourceZone:s,destZone:o,dragLeft:0,dragTop:0,onMoveResolve:m},e(5,a=l);{const w=o.dragXOffset(r,o.count+1),x=o.dragYOffset(r,o.count+1),L=o.itemHeight(),c=o.itemWidth();v.addEventListener("transitionend",A),v.style.cssText=`
                z-index: 1000; 
                position: fixed; 
				top:0; left: 0;
                height: ${L}px; 
                width: ${c}px; 
                transform: translate(${w}px,${x}px); 
                transition:
                    transform ${h}ms cubic-bezier(0.2, 0, 0, 1), 
                    height ${h}ms cubic-bezier(0.2, 0, 0, 1), 
                    width ${h}ms cubic-bezier(0.2, 0, 0, 1);`}})}function _e(t,r){ie[t?"unshift":"push"](()=>{s.items[r]=t,e(0,s),e(1,y),e(10,f),e(11,d)})}const pe=(t,r)=>B(r,t),ye=(t,r)=>U(r,t);function be(t){ie[t?"unshift":"push"](()=>{s.el=t,e(0,s),e(1,y),e(10,f),e(11,d)})}return i.$$set=t=>{"id"in t&&e(1,y=t.id),"itemCount"in t&&e(10,f=t.itemCount),"itemSize"in t&&e(11,d=t.itemSize),"type"in t&&e(12,u=t.type),"priority"in t&&e(13,g=t.priority),"itemClass"in t&&e(2,b=t.itemClass),"zoneClass"in t&&e(3,T=t.zoneClass),"keyFn"in t&&e(4,O=t.keyFn),"useHandle"in t&&e(14,H=t.useHandle),"$$scope"in t&&e(16,z=t.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&2&&e(0,s.id=y,s),i.$$.dirty[0]&3073&&(f!=s.count||d!==s.itemSize)&&(e(0,s.count=f,s),e(0,s.itemSize=d,s),e(6,V=new Array(f)),s.el&&s.styleContainerBaseStyle()),i.$$.dirty[0]&2049&&e(7,p=`${s.direction===W.Vertical?"height":"width"}: ${d}px;`)},[s,y,b,T,O,a,V,p,B,U,f,d,u,g,H,ge,z,S,_e,pe,ye,be]}class je extends Ce{constructor(n){super(),Se(this,n,qe,Be,Ee,{id:1,itemCount:10,itemSize:11,type:12,priority:13,itemClass:2,zoneClass:3,keyFn:4,useHandle:14,dropzone:0,move:15},null,[-1,-1])}get dropzone(){return this.$$.ctx[0]}get move(){return this.$$.ctx[15]}}export{W as D,je as a};
