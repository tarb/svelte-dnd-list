var xe=Object.defineProperty,ze=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var ee=(i,n,e)=>n in i?xe(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e,P=(i,n)=>{for(var e in n||(n={}))we.call(n,e)&&ee(i,e,n[e]);if($)for(var e of $(n))Ze.call(n,e)&&ee(i,e,n[e]);return i},R=(i,n)=>ze(i,ve(n));import{S as Le,i as Ce,K as Ee,e as le,k as Se,c as ue,a as ae,m as De,d as W,b as M,W as X,g as ce,J as Ie,N as te,G as Me,H as He,I as ke,r as fe,p as he,X as Te,o as Oe,Y as Ae,q as Fe,Z as Pe,w as Re,F as We,_ as Xe,U as ne}from"./index-549bb60c.js";var F=(i=>(i[i.Vertical=0]="Vertical",i[i.Horizontal=1]="Horizontal",i))(F||{}),k=(i=>(i[i.Programatic=0]="Programatic",i[i.User=1]="User",i))(k||{});function ie(i,n,e){const y=i.slice();return y[30]=n[e],y[31]=n,y[32]=e,y}const Ye=i=>({index:i[0]&128,drag:i[0]&194}),oe=i=>{var n;return{index:i[32],drag:((n=i[6])==null?void 0:n.sourceIndex)===i[32]&&i[6].sourceZone.id===i[1]?i[6]:void 0}};function se(i,n){let e,y,L,_,m=n[32],g,l,u;const p=n[16].default,b=We(p,n,n[15],oe),O=()=>n[17](e,m),H=()=>n[17](null,m);function r(...a){return n[18](n[32],...a)}function Y(...a){return n[19](n[32],...a)}return{key:i,first:null,c(){e=le("div"),b&&b.c(),y=Se(),this.h()},l(a){e=ue(a,"DIV",{"data-dnditem":!0,class:!0,style:!0});var v=ae(e);b&&b.l(v),y=De(v),v.forEach(W),this.h()},h(){M(e,"data-dnditem",""),M(e,"class",L=X(`${n[3]} ${(d==null?void 0:d.sourceIndex)===n[32]||n[6]===null?`dragging ${d.type===k.User?"user":"prog"}`:""}`)+" svelte-5pq4xz"),M(e,"style",_=`${n[0].direction===F.Vertical?"height":"width"}: ${n[2]}px;`),this.first=e},m(a,v){ce(a,e,v),b&&b.m(e,null),Ie(e,y),O(),g=!0,l||(u=[te(e,"mousedown",r),te(e,"touchstart",Y)],l=!0)},p(a,v){n=a,b&&b.p&&(!g||v[0]&32962)&&Me(b,p,n,n[15],g?ke(p,n[15],v,Ye):He(n[15]),oe),(!g||v[0]&200&&L!==(L=X(`${n[3]} ${(d==null?void 0:d.sourceIndex)===n[32]||n[6]===null?`dragging ${d.type===k.User?"user":"prog"}`:""}`)+" svelte-5pq4xz"))&&M(e,"class",L),(!g||v[0]&5&&_!==(_=`${n[0].direction===F.Vertical?"height":"width"}: ${n[2]}px;`))&&M(e,"style",_),m!==n[32]&&(H(),m=n[32],O())},i(a){g||(fe(b,a),g=!0)},o(a){he(b,a),g=!1},d(a){a&&W(e),b&&b.d(a),H(),l=!1,Te(u)}}}function qe(i){let n,e=[],y=new Map,L,_,m=i[7];const g=l=>l[5](l[32]);for(let l=0;l<m.length;l+=1){let u=ie(i,m,l),p=g(u);y.set(p,e[l]=se(p,u))}return{c(){n=le("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){n=ue(l,"DIV",{"data-dndzone":!0,class:!0});var u=ae(n);for(let p=0;p<e.length;p+=1)e[p].l(u);u.forEach(W),this.h()},h(){M(n,"data-dndzone",""),M(n,"class",L=X(`${i[4]} ${i[0].containerClass}`)+" svelte-5pq4xz")},m(l,u){ce(l,n,u);for(let p=0;p<e.length;p+=1)e[p].m(n,null);i[20](n),_=!0},p(l,u){u[0]&33775&&(m=l[7],Oe(),e=Ae(e,u,g,1,l,m,y,n,Xe,se,null,ie),Fe()),(!_||u[0]&17&&L!==(L=X(`${l[4]} ${l[0].containerClass}`)+" svelte-5pq4xz"))&&M(n,"class",L)},i(l){if(!_){for(let u=0;u<m.length;u+=1)fe(e[u]);_=!0}},o(l){for(let u=0;u<e.length;u+=1)he(e[u]);_=!1},d(l){l&&W(n);for(let u=0;u<e.length;u+=1)e[u].d();i[20](null)}}}const re="[data-dndhandle]",de=5,T=new Array;let D,d,I;function Ve(i,n){for(let e=0;e<T.length;++e){const y=T[e];if(y.insideBounding(i,n))return y}}function Ue(i,n,e){let{$$slots:y={},$$scope:L}=n,{id:_}=n,{itemCount:m}=n,{itemSize:g}=n,{type:l}=n,{priority:u=1}=n,{itemClass:p=""}=n,{zoneClass:b=""}=n,{keyFn:O=t=>t}=n,{useHandle:H=!1}=n;const r=new l(_,u,m,g),Y=Pe();let a,v=new Array(m);Re(()=>(r.styleContainerBaseStyle(),T.push(r),T.sort((t,s)=>s.priority-t.priority),()=>{T.splice(T.findIndex(t=>t===r),1)}));function q(t,s){t.button!==0||H&&t.target.closest(re)===null||(document.addEventListener("mousemove",B),document.addEventListener("mouseup",j),U({pageX:t.pageX,pageY:t.pageY},s))}function V(t,s){H&&t.target.closest(re)===null||(document.addEventListener("touchmove",N),document.addEventListener("touchend",J),U({pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},s))}function U({pageX:t,pageY:s},o){const f=r.items[o],h=f.getBoundingClientRect();D={el:f,initPageX:t,initPageY:s,sourceIndex:o,dragLeft:t-h.left,dragTop:s-h.top,sourceZone:r}}function B(t){G(t)}function N(t){G({pageX:t.touches[0].pageX,pageY:t.touches[0].pageY})}function G({pageX:t,pageY:s}){if(d===void 0&&(Math.abs(t-D.initPageX)>de||Math.abs(s-D.initPageY)>de)){d&&A();const o=document.createElement("div");o.style.cssText=r.placeholderStyleStr(),o.setAttribute("data-dndplaceholder",""),r.el.appendChild(o),d={type:k.User,el:D.el,placeholder:o,resetZones:new Set([r]),sourceIndex:D.sourceIndex,hoverIndex:void 0,sourceZone:D.sourceZone,destZone:r,dragLeft:D.dragLeft,dragTop:D.dragTop,onMoveResolve:void 0},e(6,a=d),D=void 0,document.body.style.cursor="grabbing"}d&&(I&&cancelAnimationFrame(I),I=requestAnimationFrame(()=>{I=void 0;const o=d,{el:f,sourceZone:h,sourceIndex:S,dragLeft:x,dragTop:w}=o,z=t-x,C=s-w;let c=Ve(t,s);if(c===h){const Z=c!==o.destZone;Z&&o.destZone!==void 0&&o.destZone.styleDestReset();const E=c.pointIndex(t,s);(E!==o.hoverIndex||Z)&&(c.styleSourceMove(E,S,o.hoverIndex!==void 0),d=R(P({},d),{hoverIndex:E,destZone:c}),e(6,a=d)),f.style.cssText=`position: fixed; top: 0; left: 0; z-index:1000; pointer-events:none; cursor:grabbing; height:${h.itemHeight()}px; width:${h.itemWidth()}px; transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1); position:fixed; transform:translate(${z}px,${C}px)`}else{const Z=c!==o.destZone;if(Z&&(o.destZone===h?o.destZone.styleSourceMissing(S):o.destZone!==void 0&&o.destZone.styleDestReset()),c!==void 0){Z&&o.resetZones.add(c);const E=c.pointIndex(t,s);(E!==o.hoverIndex||Z)&&(c.styleDestMove(E),d=R(P({},d),{hoverIndex:E,destZone:c}),e(6,a=d)),f.style.cssText=`position: fixed; top: 0; left: 0; z-index:1000; pointer-events: none; cursor:grabbing; position:fixed; height:${c.itemHeight()}px; width:${c.itemWidth()}px; transition: height 0.2s cubic-bezier(0.2, 0, 0, 1); transform:translate(${z}px,${C}px); transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`}else Z&&(d=R(P({},d),{hoverIndex:-1,destZone:void 0}),e(6,a=d)),f.style.cssText=`position: fixed; top: 0; left: 0; z-index:1000; pointer-events:none; cursor:grabbing; position:fixed; transform:translate(${z}px,${C}px); height:${o.sourceZone.itemHeight()}px; width:${o.sourceZone.itemWidth()}px;  transition:height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`}}))}function j(t){document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",j),d&&K()}function J(t){document.removeEventListener("touchmove",N),document.removeEventListener("touchend",J),!d&&K()}function K(){var c;I&&cancelAnimationFrame(I);const{el:t,destZone:s,sourceZone:o,sourceIndex:f}=d,h=(c=d.hoverIndex)!=null?c:f;document.body.style.cursor="",t.addEventListener("transitionend",A);let S,x,w,z,C=!1;if(s===o){let Z=0,E=0;const{count:be,direction:Q}=o;h===be&&(Q===F.Vertical?E=-1:Q===F.Horizontal&&(Z=-1)),S=o.dragXOffset(h+Z),x=o.dragYOffset(h+E),w=o.itemHeight(),z=o.itemWidth(),C=t.style.transform===`translate(${S}px, ${x}px)`||t.style.transform===""}else s!==void 0?(S=s.dragXOffset(h,s.count+1),x=s.dragYOffset(h,s.count+1),w=s.itemHeight(),z=s.itemWidth()):(S=o.dragXOffset(f),x=o.dragYOffset(f),w=o.itemHeight(),z=o.itemWidth(),o.styleSourceMove(f,f,!0));t.style.cssText=`position: fixed; top: 0; left: 0; z-index:1000; position:fixed; height:${w}px; width:${z}px; transform:translate(${S}px,${x}px); transition:transform 0.2s cubic-bezier(0.2,0,0,1), height 0.2s cubic-bezier(0.2, 0, 0, 1), width 0.2s cubic-bezier(0.2, 0, 0, 1);`,C&&A()}function A(t){var c,Z;const{el:s,destZone:o,sourceZone:f,sourceIndex:h,resetZones:S,placeholder:x}=d,w=(c=d.hoverIndex)!=null?c:h;if(t&&t.target!==s)return;I&&cancelAnimationFrame(I),I=void 0;const z={dropZoneID:f.id,index:h},C=o?o===f&&w===h?z:{dropZoneID:o.id,index:w}:void 0;x&&f.el.removeChild(x),S.forEach(E=>E.styleRemove()),s.removeEventListener("transitionend",A),(Z=d.onMoveResolve)==null||Z.call(d),d=void 0,e(6,a=void 0),Y("drop",{from:z,to:C})}async function me(t,s,o,f=500){return new Promise((h,S)=>{if(d!==void 0){h();return}const x=r.items[t];if(!x){h();return}{const w=r.dragXOffset(t),z=r.dragYOffset(t),C=r.itemHeight(),c=r.itemWidth();x.style.cssText=`z-index:1000; height:${C}px; width:${c}px; position:fixed; transform:translate(${w}px,${z}px)`}r.styleSourceMove(t,t,!1),o!==r?(setTimeout(()=>{(a==null?void 0:a.type)===k.Programatic&&r.styleSourceMissing(t)},f*.4),o.styleDestMove(s)):setTimeout(()=>{(a==null?void 0:a.type)===k.Programatic&&r.styleSourceMove(s,t,!0)},f*.25),d={type:k.Programatic,el:x,placeholder:void 0,resetZones:new Set([r,o]),sourceIndex:t,hoverIndex:s,sourceZone:r,destZone:o,dragLeft:0,dragTop:0,onMoveResolve:h},e(6,a=d);{const w=o.dragXOffset(s,o.count+1),z=o.dragYOffset(s,o.count+1),C=o.itemHeight(),c=o.itemWidth();x.addEventListener("transitionend",A),x.style.cssText=`
                z-index: 1000; 
                position: fixed; 
				top:0; left: 0;
                height: ${C}px; 
                width: ${c}px; 
                transform: translate(${w}px,${z}px); 
                transition:
                    transform ${f}ms cubic-bezier(0.2, 0, 0, 1), 
                    height ${f}ms cubic-bezier(0.2, 0, 0, 1), 
                    width ${f}ms cubic-bezier(0.2, 0, 0, 1);`}})}function ge(t,s){ne[t?"unshift":"push"](()=>{r.items[s]=t,e(0,r),e(1,_),e(10,m),e(2,g)})}const _e=(t,s)=>q(s,t),pe=(t,s)=>V(s,t);function ye(t){ne[t?"unshift":"push"](()=>{r.el=t,e(0,r),e(1,_),e(10,m),e(2,g)})}return i.$$set=t=>{"id"in t&&e(1,_=t.id),"itemCount"in t&&e(10,m=t.itemCount),"itemSize"in t&&e(2,g=t.itemSize),"type"in t&&e(11,l=t.type),"priority"in t&&e(12,u=t.priority),"itemClass"in t&&e(3,p=t.itemClass),"zoneClass"in t&&e(4,b=t.zoneClass),"keyFn"in t&&e(5,O=t.keyFn),"useHandle"in t&&e(13,H=t.useHandle),"$$scope"in t&&e(15,L=t.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&2&&e(0,r.id=_,r),i.$$.dirty[0]&1029&&(m!=r.count||g!==r.itemSize)&&(e(0,r.count=m,r),e(0,r.itemSize=g,r),e(7,v=new Array(m)),r.el&&r.styleContainerBaseStyle())},[r,_,g,p,b,O,a,v,q,V,m,l,u,H,me,L,y,ge,_e,pe,ye]}class Ge extends Le{constructor(n){super(),Ce(this,n,Ue,qe,Ee,{id:1,itemCount:10,itemSize:2,type:11,priority:12,itemClass:3,zoneClass:4,keyFn:5,useHandle:13,dropzone:0,move:14},null,[-1,-1])}get dropzone(){return this.$$.ctx[0]}get move(){return this.$$.ctx[14]}}export{F as D,Ge as a};
